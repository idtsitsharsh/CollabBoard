{"ast":null,"code":"var _jsxFileName = \"E:\\\\Harsh\\\\Harsh\\\\Client Side\\\\src\\\\components\\\\Whiteboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { useSocket } from '../socket/Socket';\nimport Toolbar from './Toolbar';\nimport Sidebar from './Chats';\nimport Canvas from './Canvas';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WhiteboardContainer = styled.div`\n  height: 100vh;\n  position: relative;\n  background: linear-gradient(135deg, #1a1a1a, #2e2e2e);\n  overflow: hidden;\n  padding-left: 160px;\n  color: white;\n`;\n_c = WhiteboardContainer;\nconst MainContent = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n`;\n_c2 = MainContent;\nconst Header = styled.div`\n  background: #2b2b2b;\n  padding: 10px 16px;\n  border-bottom: 2px solid #3e3e3e;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: relative;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);\n`;\n_c3 = Header;\nconst RoomIdInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 6px;\n`;\n_c4 = RoomIdInfo;\nconst CenterTitleBlock = styled.div`\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  text-align: center;\n  pointer-events: none;\n`;\n_c5 = CenterTitleBlock;\nconst RoomTitle = styled.h2`\n  color: #d4edda;\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin: 0;\n`;\n_c6 = RoomTitle;\nconst RoomSubtitle = styled.p`\n  color: #a9d5b5;\n  font-size: 0.85rem;\n  margin: 0;\n  font-style: italic;\n`;\n_c7 = RoomSubtitle;\nconst RoomId = styled.p`\n  font-size: 0.8rem;\n  color: #ccc;\n  margin: 0;\n  word-break: break-word;\n`;\n_c8 = RoomId;\nconst UserCount = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  margin-top: 4px;\n  font-size: 0.9rem;\n  color: #8fc490;\n  font-weight: 500;\n`;\n_c9 = UserCount;\nconst UserDot = styled.div`\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: #28a745;\n`;\n_c0 = UserDot;\nconst HeaderActions = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 12px;\n`;\n_c1 = HeaderActions;\nconst Button = styled.button`\n  padding: 8px 16px;\n  border: none;\n  border-radius: 6px;\n  font-size: 0.9rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &.primary {\n    background: linear-gradient(135deg, #28a745, #218838);\n    color: white;\n\n    &:hover {\n      background: #218838;\n    }\n  }\n\n  &.secondary {\n    background: #444;\n    color: #d4edda;\n    border: 1px solid #5a7e61;\n\n    &:hover {\n      background: #555;\n    }\n  }\n\n  &.danger {\n    background: #dc3545;\n    color: white;\n\n    &:hover {\n      background: #c82333;\n    }\n  }\n`;\n_c10 = Button;\nconst CanvasContainer = styled.div`\n  flex: 1;\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #1f1f1f;\n`;\n_c11 = CanvasContainer;\nconst LoadingOverlay = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(20, 20, 20, 0.95);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n`;\n_c12 = LoadingOverlay;\nconst LoadingText = styled.div`\n  color: #d4edda;\n  font-size: 1.1rem;\n`;\n_c13 = LoadingText;\nconst SidebarOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  right: 0;\n  width: min(300px, 90vw);\n  height: 100vh;\n  background: #2b2b2b;\n  border-left: 1px solid #444;\n  box-shadow: -2px 0 8px rgba(0,0,0,0.15);\n  transition: transform 0.3s ease-in-out, opacity 0.3s;\n  z-index: 1000;\n  overflow: hidden;\n  transform: ${({\n  $show\n}) => $show ? 'translateX(0)' : 'translateX(100%)'};\n  opacity: ${({\n  $show\n}) => $show ? 1 : 0};\n  pointer-events: ${({\n  $show\n}) => $show ? 'auto' : 'none'};\n`;\n_c14 = SidebarOverlay;\nconst Backdrop = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.4);\n  opacity: ${props => props.$show ? '1' : '0'};\n  visibility: ${props => props.$show ? 'visible' : 'hidden'};\n  transition: all 0.3s ease-in-out;\n  z-index: 999;\n`;\n_c15 = Backdrop;\nconst RedDot = styled.span`\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  background: #dc3545;\n  border-radius: 50%;\n  margin-left: 6px;\n  vertical-align: middle;\n`;\n_c16 = RedDot;\nconst ChatIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4 20V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H7l-3 3z\",\n    stroke: \"#28a745\",\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    fill: \"#fff\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 204,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 203,\n  columnNumber: 3\n}, this);\n_c17 = ChatIcon;\nfunction Whiteboard() {\n  _s();\n  const {\n    roomId\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    socket,\n    isConnected,\n    currentRoom,\n    users,\n    joinRoom,\n    leaveRoom,\n    sendDraw,\n    clearCanvas,\n    undo,\n    redo,\n    socketReady\n  } = useSocket();\n  const [isLoading, setIsLoading] = useState(true);\n  const [showSidebar, setShowSidebar] = useState(false);\n  const [currentUsername, setCurrentUsername] = useState('');\n  const [drawingSettings, setDrawingSettings] = useState({\n    tool: 'pen',\n    color: '#000000',\n    brushSize: 2,\n    opacity: 1\n  });\n  const [pendingPassword, setPendingPassword] = useState(null);\n  const [joinTried, setJoinTried] = useState(false);\n  const canvasRef = useRef(null);\n  const [remoteDrawEvent, setRemoteDrawEvent] = useState(null);\n  const [touchStart, setTouchStart] = useState(null);\n  const hasJoinedRef = useRef(false);\n  const [hasUnreadMessages, setHasUnreadMessages] = useState(false);\n  useEffect(() => {\n    if (!socket) return;\n    const handleJoinError = error => {\n      if (error.message === 'Incorrect password' || error.message === 'Password required') {\n        let password = '';\n        while (!password) {\n          password = window.prompt('Enter room password:');\n          if (password === null) return navigate('/');\n        }\n        setPendingPassword(password);\n        setJoinTried(false);\n        hasJoinedRef.current = false;\n      } else {\n        alert(error.message);\n        navigate('/');\n      }\n    };\n    socket.on('join-error', handleJoinError);\n    return () => socket.off('join-error', handleJoinError);\n  }, [socket, navigate]);\n  useEffect(() => {\n    if (isConnected && roomId && socketReady && !hasJoinedRef.current && !joinTried) {\n      let username = localStorage.getItem('username') || `User${Math.floor(Math.random() * 1000)}`;\n      localStorage.setItem('username', username);\n      setCurrentUsername(username);\n      const isPrivate = !!pendingPassword;\n      joinRoom(roomId, username, isPrivate, pendingPassword || '');\n      setIsLoading(false);\n      hasJoinedRef.current = true;\n      setJoinTried(true);\n    }\n  }, [isConnected, roomId, joinRoom, socketReady, pendingPassword, joinTried]);\n  useEffect(() => {\n    if (socket) {\n      socket.on('draw', handleRemoteDraw);\n      socket.on('stroke', handleRemoteDraw);\n      socket.on('clear-canvas', handleRemoteClear);\n      socket.on('canvas-data', handleRemoteCanvasData);\n      return () => {\n        socket.off('draw');\n        socket.off('stroke');\n        socket.off('clear-canvas');\n        socket.off('canvas-data');\n      };\n    }\n  }, [socket]);\n  useEffect(() => {\n    if (socket && currentRoom !== null && currentRoom !== void 0 && currentRoom.roomId) {\n      socket.emit('request-canvas', {\n        roomId: currentRoom.roomId\n      });\n    }\n  }, [socket, currentRoom]);\n  const handleRemoteDraw = data => setRemoteDrawEvent(data);\n  const handleRemoteClear = () => {\n    var _canvasRef$current;\n    return (_canvasRef$current = canvasRef.current) === null || _canvasRef$current === void 0 ? void 0 : _canvasRef$current.clear();\n  };\n  const handleRemoteCanvasData = ({\n    canvasData\n  }) => {\n    var _canvasRef$current2;\n    return (_canvasRef$current2 = canvasRef.current) === null || _canvasRef$current2 === void 0 ? void 0 : _canvasRef$current2.loadImageFromDataUrl(canvasData || '');\n  };\n  const handleDrawEvent = drawData => sendDraw({\n    ...drawData,\n    roomId: (currentRoom === null || currentRoom === void 0 ? void 0 : currentRoom.roomId) || roomId\n  });\n  const handleClearCanvas = () => clearCanvas((currentRoom === null || currentRoom === void 0 ? void 0 : currentRoom.roomId) || roomId);\n  const handleUndo = () => undo((currentRoom === null || currentRoom === void 0 ? void 0 : currentRoom.roomId) || roomId);\n  const handleRedo = () => redo((currentRoom === null || currentRoom === void 0 ? void 0 : currentRoom.roomId) || roomId);\n  const handleExportImage = async () => {\n    if (canvasRef.current) {\n      const dataUrl = canvasRef.current.exportImage();\n      const link = document.createElement('a');\n      link.download = `whiteboard-${roomId}.png`;\n      link.href = dataUrl;\n      link.click();\n    }\n  };\n  const handleExportPDF = async () => {\n    if (canvasRef.current) {\n      const pdf = await canvasRef.current.exportPDF();\n      pdf.save(`whiteboard-${roomId}.pdf`);\n    }\n  };\n  const handleLeaveRoom = () => leaveRoom(() => setTimeout(() => navigate('/'), 0));\n  const copyRoomLink = () => {\n    navigator.clipboard.writeText(`${window.location.origin}/whiteboard/${roomId}`);\n    alert('Room link copied to clipboard!');\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(LoadingOverlay, {\n      children: /*#__PURE__*/_jsxDEV(LoadingText, {\n        children: \"Connecting to room...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(WhiteboardContainer, {\n    children: [/*#__PURE__*/_jsxDEV(MainContent, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        children: [/*#__PURE__*/_jsxDEV(RoomIdInfo, {\n          children: [/*#__PURE__*/_jsxDEV(RoomId, {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Room ID:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 21\n            }, this), \" \", roomId]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(UserCount, {\n            children: [/*#__PURE__*/_jsxDEV(UserDot, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 24\n            }, this), \" \", (users === null || users === void 0 ? void 0 : users.length) || 0, \" Users Online\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CenterTitleBlock, {\n          children: [/*#__PURE__*/_jsxDEV(RoomTitle, {\n            children: \"CollabBoard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(RoomSubtitle, {\n            children: \"Teri Maa ki chut.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(HeaderActions, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            className: \"secondary\",\n            onClick: () => setShowSidebar(!showSidebar),\n            children: [/*#__PURE__*/_jsxDEV(ChatIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 15\n            }, this), !showSidebar && hasUnreadMessages && /*#__PURE__*/_jsxDEV(RedDot, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 53\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \"secondary\",\n            onClick: copyRoomLink,\n            children: \"Share\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \"danger\",\n            onClick: handleLeaveRoom,\n            children: \"Leave Room\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CanvasContainer, {\n        children: /*#__PURE__*/_jsxDEV(Canvas, {\n          ref: canvasRef,\n          tool: drawingSettings.tool,\n          color: drawingSettings.color,\n          brushSize: drawingSettings.brushSize,\n          opacity: drawingSettings.opacity,\n          onDrawEvent: handleDrawEvent,\n          remoteDrawEvent: remoteDrawEvent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Toolbar, {\n        settings: drawingSettings,\n        onSettingsChange: setDrawingSettings,\n        onClear: handleClearCanvas,\n        onUndo: handleUndo,\n        onRedo: handleRedo,\n        onExportImage: handleExportImage,\n        onExportPDF: handleExportPDF\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SidebarOverlay, {\n      $show: showSidebar,\n      children: /*#__PURE__*/_jsxDEV(Sidebar, {\n        users: users,\n        roomId: roomId,\n        currentUsername: currentUsername,\n        onClose: () => setShowSidebar(false),\n        onNewMessage: () => !showSidebar && setHasUnreadMessages(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Backdrop, {\n      $show: showSidebar,\n      onClick: () => setShowSidebar(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 333,\n    columnNumber: 5\n  }, this);\n}\n_s(Whiteboard, \"45ImDX0nsLkTwefMQsWnDWeYF64=\", false, function () {\n  return [useParams, useNavigate, useSocket];\n});\n_c18 = Whiteboard;\nexport default Whiteboard;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18;\n$RefreshReg$(_c, \"WhiteboardContainer\");\n$RefreshReg$(_c2, \"MainContent\");\n$RefreshReg$(_c3, \"Header\");\n$RefreshReg$(_c4, \"RoomIdInfo\");\n$RefreshReg$(_c5, \"CenterTitleBlock\");\n$RefreshReg$(_c6, \"RoomTitle\");\n$RefreshReg$(_c7, \"RoomSubtitle\");\n$RefreshReg$(_c8, \"RoomId\");\n$RefreshReg$(_c9, \"UserCount\");\n$RefreshReg$(_c0, \"UserDot\");\n$RefreshReg$(_c1, \"HeaderActions\");\n$RefreshReg$(_c10, \"Button\");\n$RefreshReg$(_c11, \"CanvasContainer\");\n$RefreshReg$(_c12, \"LoadingOverlay\");\n$RefreshReg$(_c13, \"LoadingText\");\n$RefreshReg$(_c14, \"SidebarOverlay\");\n$RefreshReg$(_c15, \"Backdrop\");\n$RefreshReg$(_c16, \"RedDot\");\n$RefreshReg$(_c17, \"ChatIcon\");\n$RefreshReg$(_c18, \"Whiteboard\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useParams","useNavigate","styled","useSocket","Toolbar","Sidebar","Canvas","jsxDEV","_jsxDEV","WhiteboardContainer","div","_c","MainContent","_c2","Header","_c3","RoomIdInfo","_c4","CenterTitleBlock","_c5","RoomTitle","h2","_c6","RoomSubtitle","p","_c7","RoomId","_c8","UserCount","_c9","UserDot","_c0","HeaderActions","_c1","Button","button","_c10","CanvasContainer","_c11","LoadingOverlay","_c12","LoadingText","_c13","SidebarOverlay","$show","_c14","Backdrop","props","_c15","RedDot","span","_c16","ChatIcon","width","height","viewBox","fill","children","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","fileName","_jsxFileName","lineNumber","columnNumber","_c17","Whiteboard","_s","roomId","navigate","socket","isConnected","currentRoom","users","joinRoom","leaveRoom","sendDraw","clearCanvas","undo","redo","socketReady","isLoading","setIsLoading","showSidebar","setShowSidebar","currentUsername","setCurrentUsername","drawingSettings","setDrawingSettings","tool","color","brushSize","opacity","pendingPassword","setPendingPassword","joinTried","setJoinTried","canvasRef","remoteDrawEvent","setRemoteDrawEvent","touchStart","setTouchStart","hasJoinedRef","hasUnreadMessages","setHasUnreadMessages","handleJoinError","error","message","password","window","prompt","current","alert","on","off","username","localStorage","getItem","Math","floor","random","setItem","isPrivate","handleRemoteDraw","handleRemoteClear","handleRemoteCanvasData","emit","data","_canvasRef$current","clear","canvasData","_canvasRef$current2","loadImageFromDataUrl","handleDrawEvent","drawData","handleClearCanvas","handleUndo","handleRedo","handleExportImage","dataUrl","exportImage","link","document","createElement","download","href","click","handleExportPDF","pdf","exportPDF","save","handleLeaveRoom","setTimeout","copyRoomLink","navigator","clipboard","writeText","location","origin","length","className","onClick","ref","onDrawEvent","settings","onSettingsChange","onClear","onUndo","onRedo","onExportImage","onExportPDF","onClose","onNewMessage","_c18","$RefreshReg$"],"sources":["E:/Harsh/Harsh/Client Side/src/components/Whiteboard.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport { useSocket } from '../socket/Socket';\r\nimport Toolbar from './Toolbar';\r\nimport Sidebar from './Chats';\r\nimport Canvas from './Canvas';\r\n\r\nconst WhiteboardContainer = styled.div`\r\n  height: 100vh;\r\n  position: relative;\r\n  background: linear-gradient(135deg, #1a1a1a, #2e2e2e);\r\n  overflow: hidden;\r\n  padding-left: 160px;\r\n  color: white;\r\n`;\r\n\r\nconst MainContent = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n`;\r\n\r\nconst Header = styled.div`\r\n  background: #2b2b2b;\r\n  padding: 10px 16px;\r\n  border-bottom: 2px solid #3e3e3e;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  position: relative;\r\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);\r\n`;\r\n\r\nconst RoomIdInfo = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  gap: 6px;\r\n`;\r\n\r\nconst CenterTitleBlock = styled.div`\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  text-align: center;\r\n  pointer-events: none;\r\n`;\r\n\r\nconst RoomTitle = styled.h2`\r\n  color: #d4edda;\r\n  font-size: 1.25rem;\r\n  font-weight: 600;\r\n  margin: 0;\r\n`;\r\n\r\nconst RoomSubtitle = styled.p`\r\n  color: #a9d5b5;\r\n  font-size: 0.85rem;\r\n  margin: 0;\r\n  font-style: italic;\r\n`;\r\n\r\nconst RoomId = styled.p`\r\n  font-size: 0.8rem;\r\n  color: #ccc;\r\n  margin: 0;\r\n  word-break: break-word;\r\n`;\r\n\r\nconst UserCount = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  margin-top: 4px;\r\n  font-size: 0.9rem;\r\n  color: #8fc490;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst UserDot = styled.div`\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 50%;\r\n  background: #28a745;\r\n`;\r\n\r\nconst HeaderActions = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n`;\r\n\r\nconst Button = styled.button`\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 6px;\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n\r\n  &.primary {\r\n    background: linear-gradient(135deg, #28a745, #218838);\r\n    color: white;\r\n\r\n    &:hover {\r\n      background: #218838;\r\n    }\r\n  }\r\n\r\n  &.secondary {\r\n    background: #444;\r\n    color: #d4edda;\r\n    border: 1px solid #5a7e61;\r\n\r\n    &:hover {\r\n      background: #555;\r\n    }\r\n  }\r\n\r\n  &.danger {\r\n    background: #dc3545;\r\n    color: white;\r\n\r\n    &:hover {\r\n      background: #c82333;\r\n    }\r\n  }\r\n`;\r\n\r\nconst CanvasContainer = styled.div`\r\n  flex: 1;\r\n  position: relative;\r\n  overflow: hidden;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #1f1f1f;\r\n`;\r\n\r\nconst LoadingOverlay = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(20, 20, 20, 0.95);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n`;\r\n\r\nconst LoadingText = styled.div`\r\n  color: #d4edda;\r\n  font-size: 1.1rem;\r\n`;\r\n\r\nconst SidebarOverlay = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  width: min(300px, 90vw);\r\n  height: 100vh;\r\n  background: #2b2b2b;\r\n  border-left: 1px solid #444;\r\n  box-shadow: -2px 0 8px rgba(0,0,0,0.15);\r\n  transition: transform 0.3s ease-in-out, opacity 0.3s;\r\n  z-index: 1000;\r\n  overflow: hidden;\r\n  transform: ${({ $show }) => $show ? 'translateX(0)' : 'translateX(100%)'};\r\n  opacity: ${({ $show }) => $show ? 1 : 0};\r\n  pointer-events: ${({ $show }) => $show ? 'auto' : 'none'};\r\n`;\r\n\r\nconst Backdrop = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.4);\r\n  opacity: ${props => props.$show ? '1' : '0'};\r\n  visibility: ${props => props.$show ? 'visible' : 'hidden'};\r\n  transition: all 0.3s ease-in-out;\r\n  z-index: 999;\r\n`;\r\n\r\nconst RedDot = styled.span`\r\n  display: inline-block;\r\n  width: 10px;\r\n  height: 10px;\r\n  background: #dc3545;\r\n  border-radius: 50%;\r\n  margin-left: 6px;\r\n  vertical-align: middle;\r\n`;\r\n\r\nconst ChatIcon = () => (\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n    <path d=\"M4 20V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H7l-3 3z\" stroke=\"#28a745\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"#fff\"/>\r\n  </svg>\r\n);\r\n\r\nfunction Whiteboard() {\r\n  const { roomId } = useParams();\r\n  const navigate = useNavigate();\r\n  const {\r\n    socket, isConnected, currentRoom, users,\r\n    joinRoom, leaveRoom, sendDraw, clearCanvas,\r\n    undo, redo, socketReady\r\n  } = useSocket();\r\n\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showSidebar, setShowSidebar] = useState(false);\r\n  const [currentUsername, setCurrentUsername] = useState('');\r\n  const [drawingSettings, setDrawingSettings] = useState({\r\n    tool: 'pen',\r\n    color: '#000000',\r\n    brushSize: 2,\r\n    opacity: 1\r\n  });\r\n  const [pendingPassword, setPendingPassword] = useState(null);\r\n  const [joinTried, setJoinTried] = useState(false);\r\n  const canvasRef = useRef(null);\r\n  const [remoteDrawEvent, setRemoteDrawEvent] = useState(null);\r\n  const [touchStart, setTouchStart] = useState(null);\r\n  const hasJoinedRef = useRef(false);\r\n  const [hasUnreadMessages, setHasUnreadMessages] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!socket) return;\r\n    const handleJoinError = (error) => {\r\n      if (error.message === 'Incorrect password' || error.message === 'Password required') {\r\n        let password = '';\r\n        while (!password) {\r\n          password = window.prompt('Enter room password:');\r\n          if (password === null) return navigate('/');\r\n        }\r\n        setPendingPassword(password);\r\n        setJoinTried(false);\r\n        hasJoinedRef.current = false;\r\n      } else {\r\n        alert(error.message);\r\n        navigate('/');\r\n      }\r\n    };\r\n    socket.on('join-error', handleJoinError);\r\n    return () => socket.off('join-error', handleJoinError);\r\n  }, [socket, navigate]);\r\n\r\n  useEffect(() => {\r\n    if (isConnected && roomId && socketReady && !hasJoinedRef.current && !joinTried) {\r\n      let username = localStorage.getItem('username') || `User${Math.floor(Math.random() * 1000)}`;\r\n      localStorage.setItem('username', username);\r\n      setCurrentUsername(username);\r\n      const isPrivate = !!pendingPassword;\r\n      joinRoom(roomId, username, isPrivate, pendingPassword || '');\r\n      setIsLoading(false);\r\n      hasJoinedRef.current = true;\r\n      setJoinTried(true);\r\n    }\r\n  }, [isConnected, roomId, joinRoom, socketReady, pendingPassword, joinTried]);\r\n\r\n  useEffect(() => {\r\n    if (socket) {\r\n      socket.on('draw', handleRemoteDraw);\r\n      socket.on('stroke', handleRemoteDraw);\r\n      socket.on('clear-canvas', handleRemoteClear);\r\n      socket.on('canvas-data', handleRemoteCanvasData);\r\n      return () => {\r\n        socket.off('draw');\r\n        socket.off('stroke');\r\n        socket.off('clear-canvas');\r\n        socket.off('canvas-data');\r\n      };\r\n    }\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    if (socket && currentRoom?.roomId) {\r\n      socket.emit('request-canvas', { roomId: currentRoom.roomId });\r\n    }\r\n  }, [socket, currentRoom]);\r\n\r\n  const handleRemoteDraw = (data) => setRemoteDrawEvent(data);\r\n  const handleRemoteClear = () => canvasRef.current?.clear();\r\n  const handleRemoteCanvasData = ({ canvasData }) =>\r\n    canvasRef.current?.loadImageFromDataUrl(canvasData || '');\r\n\r\n  const handleDrawEvent = (drawData) =>\r\n    sendDraw({ ...drawData, roomId: currentRoom?.roomId || roomId });\r\n\r\n  const handleClearCanvas = () => clearCanvas(currentRoom?.roomId || roomId);\r\n  const handleUndo = () => undo(currentRoom?.roomId || roomId);\r\n  const handleRedo = () => redo(currentRoom?.roomId || roomId);\r\n\r\n  const handleExportImage = async () => {\r\n    if (canvasRef.current) {\r\n      const dataUrl = canvasRef.current.exportImage();\r\n      const link = document.createElement('a');\r\n      link.download = `whiteboard-${roomId}.png`;\r\n      link.href = dataUrl;\r\n      link.click();\r\n    }\r\n  };\r\n\r\n  const handleExportPDF = async () => {\r\n    if (canvasRef.current) {\r\n      const pdf = await canvasRef.current.exportPDF();\r\n      pdf.save(`whiteboard-${roomId}.pdf`);\r\n    }\r\n  };\r\n\r\n  const handleLeaveRoom = () => leaveRoom(() => setTimeout(() => navigate('/'), 0));\r\n  const copyRoomLink = () => {\r\n    navigator.clipboard.writeText(`${window.location.origin}/whiteboard/${roomId}`);\r\n    alert('Room link copied to clipboard!');\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <LoadingOverlay>\r\n        <LoadingText>Connecting to room...</LoadingText>\r\n      </LoadingOverlay>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <WhiteboardContainer>\r\n      <MainContent>\r\n        <Header>\r\n          <RoomIdInfo>\r\n            <RoomId><strong>Room ID:</strong> {roomId}</RoomId>\r\n            <UserCount><UserDot /> {users?.length || 0} Users Online</UserCount>\r\n          </RoomIdInfo>\r\n\r\n          <CenterTitleBlock>\r\n            <RoomTitle>CollabBoard</RoomTitle>\r\n            <RoomSubtitle>Teri Maa ki chut.</RoomSubtitle>\r\n          </CenterTitleBlock>\r\n\r\n          <HeaderActions>\r\n            <Button className=\"secondary\" onClick={() => setShowSidebar(!showSidebar)}>\r\n              <ChatIcon />\r\n              {!showSidebar && hasUnreadMessages && <RedDot />}\r\n            </Button>\r\n            <Button className=\"secondary\" onClick={copyRoomLink}>Share</Button>\r\n            <Button className=\"danger\" onClick={handleLeaveRoom}>Leave Room</Button>\r\n          </HeaderActions>\r\n        </Header>\r\n\r\n        <CanvasContainer>\r\n          <Canvas\r\n            ref={canvasRef}\r\n            tool={drawingSettings.tool}\r\n            color={drawingSettings.color}\r\n            brushSize={drawingSettings.brushSize}\r\n            opacity={drawingSettings.opacity}\r\n            onDrawEvent={handleDrawEvent}\r\n            remoteDrawEvent={remoteDrawEvent}\r\n          />\r\n        </CanvasContainer>\r\n\r\n        <Toolbar\r\n          settings={drawingSettings}\r\n          onSettingsChange={setDrawingSettings}\r\n          onClear={handleClearCanvas}\r\n          onUndo={handleUndo}\r\n          onRedo={handleRedo}\r\n          onExportImage={handleExportImage}\r\n          onExportPDF={handleExportPDF}\r\n        />\r\n      </MainContent>\r\n\r\n      <SidebarOverlay $show={showSidebar}>\r\n        <Sidebar\r\n          users={users}\r\n          roomId={roomId}\r\n          currentUsername={currentUsername}\r\n          onClose={() => setShowSidebar(false)}\r\n          onNewMessage={() => !showSidebar && setHasUnreadMessages(true)}\r\n        />\r\n      </SidebarOverlay>\r\n\r\n      <Backdrop $show={showSidebar} onClick={() => setShowSidebar(false)} />\r\n    </WhiteboardContainer>\r\n  );\r\n}\r\n\r\nexport default Whiteboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}